<project name="Stratos Build Windows" basedir=".." default="build">
	
	<property name="exename" value="stratos.exe" />
    <property name="config"  value="stratos.ini" />
    <property name="output"  value="../Stratos_Build_Windows" />
    <property name="outZip"  value="../Stratos_Build_Windows.zip" />
	<property file="local.properties" />
	
	<target name="build">
		
		<copy todir="${output}/media">
			<fileset dir="media"/>
		</copy>
		
		<echo>${launch4j.path}/launch4j.jar</echo>
			

		<mkdir dir="${output}/include"/>
		<mkdir dir="${output}/saves"/>
		
    	<copy todir="${output}/include">
    		<fileset dir="libs"/>
   		</copy>
    	<jar destfile="${output}/include/stratos.jar" basedir="bin">
    	</jar>
		
		<taskdef name="launch4j"
		    classname="net.sf.launch4j.ant.Launch4jTask"
		    classpath="${launch4j.path}/launch4j.jar;${launch4j.path}/lib/xstream.jar" />

		<launch4j configFile="resource/launch4j.xml" outfile="${output}/Stratos.exe"/>
		
		<delete file="${outZip}" quiet="true" /> <!-- because zip tasks opens it for some reason, and fails if damaged -->
		<zip destfile="${outZip}" basedir="${output}" update="false" />
	</target>
</project>